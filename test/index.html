<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script type="module">
      import IDBee from "../src/index.js";

      const todoList = [
        {
          userId: 1,
          todo: "Go for a run",
          tags: ["health", "fitness"],
        },
        {
          userId: 1,
          todo: "Learn a new language",
          tags: ["education", "self-improvement"],
        },
        {
          userId: 5,
          todo: "Cook a new recipe",
          tags: ["cooking", "food"],
        },
        {
          userId: 3,
          todo: "Write a journal entry",
          tags: ["reflection", "writing"],
        },
        {
          userId: 5,
          todo: "Paint a landscape",
          tags: ["creativity", "art"],
        },
        {
          userId: 2,
          todo: "Plan a weekend trip",
          tags: ["travel", "adventure"],
        },
        {
          userId: 8,
          todo: "Visit a museum",
          tags: ["culture", "learning"],
        },
        {
          userId: 5,
          todo: "Start a blog",
          tags: ["writing", "technology"],
        },
        {
          userId: 9,
          todo: "Practice meditation",
          tags: ["mindfulness", "health"],
        },
        {
          userId: 4,
          todo: "Organize a meetup",
          tags: ["social", "networking"],
        },
      ];

      const mydb = new IDBee();

      await mydb
        .name("mydb")
        .version(1)
        .stores([
          {
            name: "users",
            indexes: [{ name: "firstName" }, { name: "age" }],
          },
          {
            name: "todos",
            options: { keyPath: null, autoIncrement: true },
            indexes: [
              { name: "userId" },
              { name: "todo" },
              { name: "tags", multiEntry: true },
            ],
          },
        ])
        .open();

      const result = await mydb.transaction(async ({ users, todos }) => {
        const result = await todos.get({
          index: "userId",
          where: (value) => (value.userId === 5 ? value : null),
          direction: "nextunique",
        });

        console.log(result);
      });

      console.log(result);
    </script>
  </body>
</html>
